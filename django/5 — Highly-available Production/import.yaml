# zeropsPreprocessor=true

# Highly-available production environment provides a production setup
# with enhanced scaling, dedicated resources, and HA components for improved durability and performance.

project:
  name: django-ha-prod
  # Specifies the highly available, higher-performance core service.
  corePackage: SERIOUS

services:
  - hostname: app
    type: python@3.12
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/django-app
    enableSubdomainAccess: true
    envSecrets:
      SECRET_KEY: <@generateRandomString(<32>)>
      # Default superuser password can be found in the environment variables section of the service in GUI.
      DJANGO_SUPERUSER_PASSWORD: <@generateRandomString(<12>)>
    minContainers: 2
    verticalAutoscaling: 
      minFreeRamGB: 0.25

  - hostname: db
    type: postgresql@17
    mode: HA
    priority: 10

  - hostname: storage
    type: object-storage
    objectStorageSize: 100
    objectStoragePolicy: public-read
    priority: 10
