# Stage environment uses the same configuration as production,
# but runs on the lowest scaling settings.

project:
  name: rust-hello-world-stage

services:
  # Deploy the Rust Hello World stage app, running on
  # Rust stable with the compiled binary.
  - hostname: app
    type: rust@stable
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/rust-hello-world-app
    enableSubdomainAccess: true

  # Set higher priority for databases,
  # because the app depends on those services.

  # Deploy single node PostgreSQL database,
  # used by the Rust app to store data. Automatic,
  # encrypted backups are enabled by default.
  - hostname: db
    type: postgresql@16
    mode: NON_HA
    priority: 10
