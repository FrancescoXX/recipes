project:
  name: rust-hello-world-stage

services:
  # Staging environment for build pipeline validation.
  # Mirrors the production setup on a single container to verify 
  # 'cargo build --release' and readiness checks.
  - hostname: app
    type: rust@stable
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/rust-hello-world-app
    enableSubdomainAccess: true

  # PostgreSQL database service
  # Priority 10 ensures the DB is available before application containers start.
  - hostname: db
    type: postgresql@17
    mode: NON_HA
    priority: 10