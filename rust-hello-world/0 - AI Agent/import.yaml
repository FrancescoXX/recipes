project:
  name: rust-hello-world-ai-agent

services:
  # AI agent development workstation
  # Receives 'zcli push --setup=dev' deployments.
  # The 'dev' setup allows the agent to manage the application lifecycle via SSH.
  - hostname: appdev
    type: rust@stable
    zeropsSetup: dev
    buildFromGit: https://github.com/zerops-recipe-apps/rust-hello-world-app
    enableSubdomainAccess: true
    minContainers: 1
    maxContainers: 1
    verticalAutoscaling:
      minRam: 0.5
    # Note: Rust compilation requires at least 0.5 GB RAM. 
    # Increase minRam if build processes encounter OOM errors.

  # Staging service for build pipeline validation
  # Receives 'zcli push --setup=prod' deployments.
  # Used to verify release builds and readiness checks before production.
  - hostname: appstage
    type: rust@stable
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/rust-hello-world-app
    enableSubdomainAccess: true

  # PostgreSQL database service
  # Priority 10 ensures the DB is available before application services start.
  - hostname: db
    type: postgresql@17
    mode: NON_HA
    priority: 10