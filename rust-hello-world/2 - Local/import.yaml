project:
  name: rust-hello-world-local

services:
  # Application service using the production build pipeline.
  # Run 'zcli push --setup=prod' from your local machine to deploy changes.
  # Access the cloud-hosted database from your local machine via Zerops VPN:
  #   zcli vpn up        — connect to the project network
  #   zcli vpn down      — disconnect when done
  # With VPN active, DB_HOST resolves to the 'db' container — the same
  # connection string your production app uses.
  - hostname: app
    type: rust@stable
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/rust-hello-world-app
    enableSubdomainAccess: true

  # Deploy PostgreSQL database for app data.
  # Priority 10 ensures the database starts before application containers,
  # preventing connection errors during deployment. This startup ordering
  # pattern applies to all data services in this project.
  - hostname: db
    type: postgresql@17
    mode: NON_HA
    priority: 10
