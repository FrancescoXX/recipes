project:
  name: rust-hello-world-local

services:
  # Application service using the production build pipeline.
  # Deploy changes from a local machine using 'zcli push --setup=prod'.
  # Connect to the cloud-hosted database via Zerops VPN:
  #   zcli vpn up   — connect to the project network
  #   zcli vpn down — disconnect when done
  - hostname: app
    type: rust@stable
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/rust-hello-world-app
    enableSubdomainAccess: true

  # PostgreSQL database service
  # Priority 10 ensures the DB is available before application services start.
  - hostname: db
    type: postgresql@17
    mode: NON_HA
    priority: 10