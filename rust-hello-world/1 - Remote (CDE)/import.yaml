project:
  name: rust-hello-world-remote-cde

services:
  # Remote Cloud Development Environment (CDE)
  # Supports remote IDEs (e.g., VS Code Remote SSH) with the source tree and
  # Cargo registry pre-deployed. The 'dev' setup allows manual application
  # control via SSH.
  - hostname: appdev
    type: rust@stable
    zeropsSetup: dev
    buildFromGit: https://github.com/zerops-recipe-apps/rust-hello-world-app
    enableSubdomainAccess: true
    minContainers: 1
    maxContainers: 1
    verticalAutoscaling:
      minRam: 0.5
    # Note: 0.5 GB is minimal. For heavy compilation, consider increasing 
    # minRam to 4 GB to prevent OOM errors during builds.

  # Staging service for production pipeline validation
  # Receives 'zcli push --setup=prod' deployments.
  # Confirms that release builds and readiness checks pass before production.
  - hostname: appstage
    type: rust@stable
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/rust-hello-world-app
    enableSubdomainAccess: true

  # PostgreSQL database service
  # Priority 10 ensures the DB is ready before application services attempt to connect.
  - hostname: db
    type: postgresql@17
    mode: NON_HA
    priority: 10