project:
  name: rust-hello-world-small-production

services:
  # Production service with horizontal and vertical autoscaling.
  # minContainers: 2 enables zero-downtime deployments by ensuring new 
  # containers are ready before old ones are decommissioned.
  - hostname: app
    type: rust@stable
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/rust-hello-world-app
    enableSubdomainAccess: true
    minContainers: 2
    maxContainers: 10
    verticalAutoscaling:
      minRam: 0.125
      minFreeRamGB: 0.05
    # Note: minFreeRamGB provides headroom for the Tokio runtime and 
    # connection handling under load, preventing OOM kills.

  # PostgreSQL database service
  # Priority 10 ensures the database is available before application services start.
  - hostname: db
    type: postgresql@17
    mode: NON_HA
    priority: 10