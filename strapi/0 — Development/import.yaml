# zeropsPreprocessor=on
project:
  name: strapi-development

services:
  - hostname: strapi
    type: nodejs@22
    buildFromGit: https://github.com/zerops-recipe-apps/strapi-app
    zeropsSetup: dev
    envSecrets:
      APP_KEYS: <@generateRandomString(<32>)>,<@generateRandomString(<32>)>
      API_TOKEN_SALT: <@generateRandomString(<32>)>
      ADMIN_JWT_SECRET: <@generateRandomString(<32>)>
      TRANSFER_TOKEN_SALT: <@generateRandomString(<32>)>
      JWT_SECRET: <@generateRandomString(<32>)>
      ENCRYPTION_KEY: <@generateRandomString(<32>)>
    enableSubdomainAccess: true
    verticalAutoscaling: 
      minRam: 2

  - hostname: db
    type: postgresql@17
    priority: 10
    mode: NON_HA

  - hostname: storage
    type: object-storage
    priority: 10
    objectStorageSize: 2
    objectStoragePolicy: public-read

  - hostname: mailpit
    type: go@1
    buildFromGit: https://github.com/zerops-recipe-apps/mailpit-app
    enableSubdomainAccess: true