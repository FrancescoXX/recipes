project:
  name: go-hello-world-ha-prod
  # Specifies the highly available, higher-performance core service.
  corePackage: SERIOUS

services:
  # Deploy the production service using the 'prod' setup.
  # Disable subdomain access after configuring HTTPS for your custom domain.
  # Allocates higher minimum resources and dedicated CPUs
  # to manage high traffic volumes.
  - hostname: app
    type: go@1
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/go-hello-world-app
    enableSubdomainAccess: true
    minContainers: 2
    verticalAutoscaling:
      cpuMode: DEDICATED
      minRam: 0.5
    
  # The app requires a database.
  # Deploys an HA database for improved resilience
  # and performance, with increased minimum resource limits.
  # Automatic daily encrypted backups are enabled by default.
  - hostname: db
    type: postgresql@17
    mode: HA
    verticalAutoscaling:
      cpuMode: DEDICATED
      minRam: 1
