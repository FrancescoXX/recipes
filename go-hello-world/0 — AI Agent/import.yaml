project:
  name: go-hello-world-agent

services:
  # Deploy the staging service, where agents can continuously deploy
  # code changes to test the deployment process
  # and verify app behavior in the 'prod' setup.
  # The web app is publicly accessible via the Zerops subdomain.
  - hostname: appstage
    type: go@1
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/go-hello-world-app
    enableSubdomainAccess: true

  # Set up the AI agent development environment using the 'dev' setup,
  # which includes Go pre-installed based on the zerops.yaml from the 'buildFromGit' repository.
  - hostname: appdev
    type: go@1
    zeropsSetup: dev
    buildFromGit: https://github.com/zerops-recipe-apps/go-hello-world-app
    enableSubdomainAccess: true
    # Agents running Go or linters may require more resources.
    # Adjust limits as needed. Agent services can be stopped when inactive to reduce costs.
    # verticalAutoscaling:
    #   minRam: 2
    #   cpu: 4
    #   cpuMode: DEDICATED

  # The Hello World Go app requires a database for development.
  # Deploy the database in Zerops, accessible as 'db' hostname
  # within the 'appdev' service.
  # The staged app in 'appstage' also connects to this database.
  - hostname: db
    type: postgresql@17
    mode: NON_HA