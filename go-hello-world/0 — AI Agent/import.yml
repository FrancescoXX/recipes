project:
  name: go-hello-world-agent

services:
  # Spin up the staging service, where the agents can continuously deploy
  # changes made to your code, thus testing the deployment process
  # and also allowing to test the app behavior in 'prod' setup
  # (the web app is publicly available via Zerops subdomain).
  - hostname: appstage
    type: go@1
    zeropsSetup: prod
    buildFromGit: https://github.com/zerops-recipe-apps/go-hello-world-app
    enableSubdomainAccess: true

  # Spin up the agentic development environment with the 'dev' setup,
  # which has Go pre-installed (as per the zerops.yaml from 'buildFromGit' repository).
  - hostname: appdev
    type: go@1
    zeropsSetup: dev
    buildFromGit: https://github.com/zerops-recipe-apps/go-hello-world-app
    enableSubdomainAccess: true
    # Agents, which run Go or linters can demand more resources.
    # Feel free to set higher limits. Services where agents live,
    # can be freely stopped when not used, thus saving costs.
    # verticalAutoscaling:
    #   minRam: 2
    #   cpu: 4
    #   cpuMode: DEDICATED

  # In order to develop the Hello World Go app, database is required.
  # Spin up the database in Zerops, making it available on 'db' hostname
  # for development inside the 'appdev' service.
  # The deployed stage app in 'appstage' also uses this database. 
  - hostname: db
    type: postgresql@17
    mode: NON_HA